import {
    NextPage,
    GetStaticPaths,
    GetStaticProps,
    GetStaticPropsContext,
    InferGetStaticPropsType,
} from "next";
import Head from "next/head";
import Link from "next/link";
import { useMemo } from "react";

import styles from "../../styles/css/home.module.css";

type PageProps = InferGetStaticPropsType<typeof getStaticProps>;
export const getStaticPaths: GetStaticPaths = async () => {
    return {
        paths: [
            {
                params: { type: "jp" },
            },
            {
                params: { type: "en" },
            },
        ],
        fallback: false,
    };
};

export const getStaticProps: GetStaticProps = async ({
    params,
}: GetStaticPropsContext) => {
    const pageType = params!.type;

    const isEnglish = pageType === "en";

    return {
        props: {
            isEnglish: isEnglish,
        },
    };
};

const Experiment: NextPage = ({ ...props }: PageProps) => {
    const isEnglish = props.isEnglish;

    const [tutorialXRay, tutorialCArm, exerciseXRay, exerciseCArm] =
        useMemo(() => {
            const tutorial = !isEnglish ? "tutorial" : "tutorial_en";
            const exercise = !isEnglish ? "exercise" : "exercise_en";

            return [
                `/visualization/X-Ray/${tutorial}`,
                `/visualization/C-Arm/${tutorial}`,
                `/visualization/X-Ray/${exercise}`,
                `/visualization/C-Arm/${exercise}`,
            ];
        }, [isEnglish]);

    return (
        <div className={styles.container}>
            <Head>
                <title>Radiation Protection Education</title>
                <meta
                    name="description"
                    content="Generated by create next app"
                />
            </Head>

            <main className={styles.main}>
                <h1 className={styles.title}>Radiation Protection Education</h1>

                <p className={styles.description}></p>

                <h2>{!isEnglish ? <>可視化教材</> : <>Visualization</>}</h2>
                <h3>Tutorial</h3>
                <div className={styles.grid}>
                    <div className={styles.card}>
                        <Link href={tutorialXRay}>
                            <h2>X-Ray &rarr;</h2>
                            <p>Next.js + react-three/fiber, Texture 3D</p>
                        </Link>
                    </div>
                    <div className={styles.card}>
                        <Link href={tutorialCArm}>
                            <h2>C-Arm &rarr;</h2>
                            <p>Next.js + react-three/fiber, Texture 3D</p>
                        </Link>
                    </div>
                </div>

                <h3>Execise</h3>
                <div className={styles.grid}>
                    <div className={styles.card}>
                        <Link href={exerciseXRay}>
                            <h2>X-Ray &rarr;</h2>
                            <p>Next.js + react-three/fiber, Texture 3D</p>
                        </Link>
                    </div>
                    <div className={styles.card}>
                        <Link href={exerciseCArm}>
                            <h2>C-Arm &rarr;</h2>
                            <p>Next.js + react-three/fiber, Texture 3D</p>
                        </Link>
                    </div>
                </div>

                <h2>{!isEnglish ? <>VR教材</> : <>VR</>}</h2>
                <div className={styles.grid}>
                    <div className={styles.card}>
                        <Link href={"/VR/X-Ray"}>
                            <h2>X-Ray &rarr;</h2>
                            <p>
                                Next.js + react-three/fiber, Texture 3D, WebXR
                            </p>
                        </Link>
                    </div>
                    <div className={styles.card}>
                        <Link href={"/VR/C-Arm"}>
                            <h2>C-Arm &rarr;</h2>
                            <p>
                                Next.js + react-three/fiber, Texture 3D, WebXR
                            </p>
                        </Link>
                    </div>
                </div>
            </main>

            <footer className={styles.footer}>
                <a
                    href="https://github.com/Ireansan/radiation_protection_education"
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    by Ireansan
                </a>
            </footer>
        </div>
    );
};

export default Experiment;
